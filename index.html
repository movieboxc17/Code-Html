<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern HTML Code Tester | Teknik.AB Games</title>
    
    <!-- Modern dependencies -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/editor/editor.main.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <style>
        /* Enhanced styling */
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #1d4ed8;
            --dark-bg: #0f172a;
            --accent-color: #22c55e;
        }

        body {
            background: linear-gradient(135deg, var(--dark-bg), #1e293b);
            color: #fff;
            font-family: 'Inter', sans-serif;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .editor-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .editor-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }

        .btn-modern {
            padding: 0.7rem 1.4rem;
            border-radius: 12px;
            font-weight: 600;
            letter-spacing: 0.3px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .btn-modern i {
            font-size: 1.2rem;
        }

        .btn-modern:hover {
            transform: translateY(-2px) scale(1.02);
        }

        .template-select {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            border-radius: 12px;
            padding: 0.7rem 1.4rem;
            font-weight: 500;
        }

        .result-frame {
            border-radius: 12px;
            background: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .result-frame.fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1000;
            border-radius: 0;
        }

        .version-badge {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* New loading animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--primary-color);
            border-top: 5px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="text-center mb-5">
            <h1 class="display-5 fw-bold">Modern HTML Code Tester</h1>
            <p class="lead">by Teknik.AB Games</p>
        </header>

        <div class="row g-4">
            <div class="col-lg-6">
                <div class="editor-container">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="m-0">Editor</h3>
                        <div class="btn-group">
                            <button class="btn btn-modern btn-light" onclick="toggleFullScreen()">
                                <i class="ri-fullscreen-line"></i> Fullscreen
                            </button>
                        </div>
                    </div>
                    <div id="editor" style="height: 500px; border-radius: 8px;"></div>
                    
                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <button class="btn btn-modern btn-primary" onclick="runCode()">
                            <i class="ri-play-circle-line"></i> Run Code
                        </button>
                        
                        <div class="input-group">
                            <select id="templateSelect" class="form-select template-select">
                                <option value="default">Default Template</option>
                                <option value="simple">Simple Template</option>
                                <option value="complex">Modern Template</option>
                            </select>
                            <button class="btn btn-modern btn-secondary" onclick="insertTemplate()">
                                <i class="ri-file-add-line"></i> Insert
                            </button>
                        </div>
                    </div>

                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <button class="btn btn-modern btn-success" onclick="saveHTMLFile()">
                            <i class="ri-save-line"></i> Save
                        </button>
                        <button class="btn btn-modern btn-info" onclick="downloadHTMLFile()">
                            <i class="ri-download-line"></i> Download
                        </button>
                        <button class="btn btn-modern btn-warning" onclick="openHTMLFile()">
                            <i class="ri-folder-open-line"></i> Open
                        </button>
                    </div>
                </div>
            </div>
              <div class="col-lg-6">
                  <!-- Updated preview container -->
                  <div class="editor-container">
                      <div class="d-flex justify-content-between align-items-center mb-3">
                          <h3>Preview</h3>
                          <div class="preview-controls">
                              <button class="btn btn-modern btn-light" onclick="refreshPreview()">
                                  <i class="ri-refresh-line"></i> Refresh
                              </button>
                              <button class="btn btn-modern btn-light" onclick="togglePreviewFullscreen()">
                                  <i class="ri-fullscreen-line"></i> Fullscreen
                              </button>
                          </div>
                      </div>
                      <div class="preview-wrapper">
                          <iframe id="output" class="result-frame" sandbox="allow-scripts allow-same-origin" style="width: 100%; height: 500px;"></iframe>
                      </div>
                  </div>
              </div>
          </div>

  <footer class="copyright-footer">
      <p>Copyright Â© 2025 PixelHeavenGames. All rights reserved.</p>
  </footer>

  <style>
  .copyright-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(10px);
      padding: 1rem;
      text-align: center;
      color: #fff;
      font-weight: 500;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 100;
  }

  .preview-wrapper {
      position: relative;
      width: 100%;
      border-radius: 12px;
      overflow: hidden;
  }

  .preview-controls {
      display: flex;
      gap: 10px;
  }

  .result-frame {
      border: none;
      background: white;
      width: 100%;
      height: 100%;
  }
  </style>

  <script>
  function refreshPreview() {
      const htmlCode = editor.getValue();
      const outputFrame = document.getElementById('output');
      
      // Create a clean document with proper HTML structure
      const previewContent = `
          <!DOCTYPE html>
          <html>
              <head>
                  <meta charset="UTF-8">
                  <meta name="viewport" content="width=device-width, initial-scale=1.0">
              </head>
              <body>
                  ${htmlCode}
              </body>
          </html>
      `;
      
      outputFrame.srcdoc = previewContent;
  }

  // Update the existing runCode function
  function runCode() {
      refreshPreview();
  }

  function togglePreviewFullscreen() {
      const preview = document.getElementById('output');
      const previewWrapper = preview.parentElement;
      
      if (!document.fullscreenElement) {
          previewWrapper.requestFullscreen().catch(err => {
              console.log('Error attempting to enable fullscreen:', err);
          });
      } else {
          document.exitFullscreen();
      }
  }

  // Add ESC key support to exit fullscreen
  document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
          if (document.fullscreenElement) {
              document.exitFullscreen();
          }
      }
  });
  </script>
    </div>
    <div class="version-badge">Version 4.0</div>
    
    <input type="file" id="openFileInput" style="display:none;" accept=".html">

    <!-- Modern Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.js"></script>
    
    <!-- Add this script block right before the closing </body> tag -->
<script>
    let editor;
    let isFullScreen = false;

    // Initialize Monaco Editor with proper configuration
    require.config({ 
        paths: { 
            'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs'
        }
    });

    window.MonacoEnvironment = {
        getWorkerUrl: function(workerId, label) {
            return `data:text/javascript;charset=utf-8,${encodeURIComponent(`
                self.MonacoEnvironment = {
                    baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/'
                };
                importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/base/worker/workerMain.js');`
            )}`;
        }
    };

    require(['vs/editor/editor.main'], function() {
        editor = monaco.editor.create(document.getElementById('editor'), {
            value: '<!-- Enter your HTML code here -->',
            language: 'html',
            theme: 'vs-dark',
            automaticLayout: true,
            minimap: {
                enabled: true
            },
            fontSize: 14,
            lineNumbers: 'on',
            roundedSelection: true,
            scrollBeyondLastLine: false,
            readOnly: false,
            cursorStyle: 'line'
        });

        // Enable automatic resizing
        window.addEventListener('resize', function() {
            editor.layout();
        });
    });

// Add these functions after the Monaco editor initialization code

function runCode() {
    const htmlCode = editor.getValue();
    const outputFrame = document.getElementById("output");
    outputFrame.srcdoc = htmlCode;
}

function insertTemplate() {
    const templateSelect = document.getElementById("templateSelect");
    const selectedTemplate = templateSelect.value;
    let templateCode = "";

    const templates = {
        simple: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Template</title>
</head>
<body>
    <h1>Hello, World!</h1>
    <p>This is a simple template</p>
</body>
</html>`,
        complex: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Template</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 2rem; }
        .container { max-width: 800px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="display-4">Welcome</h1>
        <p class="lead">This is a modern template with Bootstrap</p>
        <button class="btn btn-primary">Click Me</button>
    </div>
</body>
</html>`,
        default: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Page</title>
</head>
<body>
    <h1>Start Coding</h1>
</body>
</html>`
    };

    editor.setValue(templates[selectedTemplate] || templates.default);
}

function saveHTMLFile() {
    const htmlCode = editor.getValue();
    localStorage.setItem('savedCode', htmlCode);
    showToast('Code saved successfully!');
}

function downloadHTMLFile() {
    const htmlCode = editor.getValue();
    const blob = new Blob([htmlCode], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'index.html';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}
function openHTMLFile() {
    const input = document.getElementById('openFileInput');
    input.click();
    
    input.onchange = function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                editor.setValue(e.target.result);
            };
            reader.readAsText(file);
        }
    };
}

function toggleFullScreen() {
    const editorElement = document.getElementById('editor');
    
    if (!document.fullscreenElement) {
        editorElement.requestFullscreen().catch(err => {
            console.log(`Error attempting to enable fullscreen: ${err.message}`);
        });
    } else {
        document.exitFullscreen();
    }
}
</script>
</body>
</html>
